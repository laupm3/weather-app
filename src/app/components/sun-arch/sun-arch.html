<div class="sun-arch-container glass" *ngIf="weatherData || loading">
    <ng-container *ngIf="!loading && weatherData; else skeletonSun">
        <h3 class="arch-title">{{ langService.get('SUN_TIME') || 'Sun Cycle' }}</h3>

        <div class="arch-wrapper">
            <svg viewBox="0 0 100 55" class="arch-svg">
                <!-- Arch Path -->
                <path d="M 5 50 A 45 45 0 0 1 95 50" class="arch-bg" fill="none" />

                <!-- Progress Path (Dashed or Solid) -->
                <path d="M 5 50 A 45 45 0 0 1 95 50" class="arch-progress" fill="none"
                    [style.stroke-dasharray]="'141.37'" [style.stroke-dashoffset]="141.37 - (sunProgress * 141.37)" />

                <!-- The Sun Icon -->
                <circle [attr.cx]="getTranslateX()" [attr.cy]="getTranslateY()" r="4" class="sun-dot"
                    *ngIf="isDaylight" />
            </svg>

            <div class="time-labels">
                <div class="time-item">
                    <svg viewBox="0 0 24 24" class="time-icon sunrise">
                        <path
                            d="M12 2v6m0 10v4M4.9 4.9l4.3 4.3m5.6 5.6l4.3 4.3M2 12h6m10 0h4M4.9 19.1l4.3-4.3m5.6-5.6l4.3-4.3"
                            stroke="currentColor" stroke-width="2" stroke-linecap="round" />
                        <circle cx="12" cy="12" r="4" fill="none" stroke="currentColor" stroke-width="2" />
                        <path d="M12 18v-4m-4 4h8" stroke="currentColor" stroke-width="2" stroke-linecap="round" />
                    </svg>
                    <span class="value">{{ formatTime(weatherData.sys.sunrise) }}</span>
                </div>
                <div class="time-item">
                    <svg viewBox="0 0 24 24" class="time-icon sunset">
                        <path
                            d="M12 2v6m0 10v4M4.9 4.9l4.3 4.3m5.6 5.6l4.3 4.3M2 12h6m10 0h4M4.9 19.1l4.3-4.3m5.6-5.6l4.3-4.3"
                            stroke="currentColor" stroke-width="2" stroke-linecap="round" opacity="0.5" />
                        <circle cx="12" cy="12" r="4" fill="none" stroke="currentColor" stroke-width="2" />
                        <path d="M8 18h8" stroke="currentColor" stroke-width="2" stroke-linecap="round" />
                    </svg>
                    <span class="value">{{ formatTime(weatherData.sys.sunset) }}</span>
                </div>
            </div>
        </div>
    </ng-container>

    <ng-template #skeletonSun>
        <div class="skeleton" style="width: 70%; height: 1.8rem; margin-bottom: 2rem;"></div>
        <div class="skeleton" style="width: 100%; height: 80px; border-radius: 50% 50% 0 0 / 100% 100% 0 0;"></div>
        <div class="time-labels" style="margin-top: 2rem;">
            <div class="skeleton" style="width: 45%; height: 1.2rem;"></div>
            <div class="skeleton" style="width: 45%; height: 1.2rem;"></div>
        </div>
    </ng-template>
</div>